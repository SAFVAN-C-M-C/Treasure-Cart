<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />

    <style>
        .address-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }

        .address-line {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .address-value {
            margin-bottom: 10px;
        }

        .card {
            border-radius: 15px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }

        /* body {
        background-color: rgb(36, 47, 69);
      } */
        .card-title {
            color: #007bff;
        }

        .main {
            margin-top: 10vh;
        }

        .address-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }

        .address-line {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .address-value {
            margin-bottom: 10px;
        }

        .card {
            border-radius: 15px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }

        .card-title {
            color: #007bff;
        }

        .confirm-order-btn {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin-right: 10px;
            cursor: pointer;
        }

        .address-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }

        .address-line {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .address-value {
            margin-bottom: 10px;
        }

        .card {
            border-radius: 15px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }

        .card-title {
            color: #007bff;
        }

        .back-to-shop-btn {
            background-color: #58718c;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        </style </head><body><div class="modal fade"
        id="addAddressModal"
        tabindex="-1"
        aria-labelledby="addAddressModalLabel"
        aria-hidden="true"
        ><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addAddressModalLabel">Add Address</h5><button type="button"
        class="btn-close"
        data-bs-dismiss="modal"
        aria-label="Close"
        ></button></div><div class="modal-body"><form action="/addAddress-Checkout" method="post"><div class="mb-3"><label for="fullName" class="form-label">Full Name</label><input type="text"
        class="form-control"
        name="Name"
        id="fullName"
        placeholder="Enter your full name"
        required /></div><div class="mb-3"><label for="address" class="form-label">Address</label><input type="text"
        class="form-control"
        name="Address"
        id="address"
        placeholder="Enter your address"
        required /></div><div class="mb-3"><label for="city" class="form-label">City</label><input type="text"
        class="form-control"
        id="city"
        name="City"
        placeholder="Enter your city"
        required /></div><div class="mb-3"><label for="pincode" class="form-label">Pincode</label><input type="text"
        class="form-control"
        id="pincode"
        name="Pincode"
        placeholder="Enter your pincode"
        required /></div><div class="mb-3"><label for="state" class="form-label">State</label><input type="text"
        class="form-control"
        id="state"
        name="State"
        placeholder="Enter your state"
        required /></div><div class="mb-3"><label for="mobileNumber" class="form-label"
        >Mobile Number</label><input type="tel"
        class="form-control"
        id="mobileNumber"
        name="Mobile"
        placeholder="Enter your mobile number"
        required /></div><button type="submit" class="btn btn-dark" style="background-color: black;">Submit</button></form></div><div class="modal-footer"><button style="background-color: black;"
        type="button"
        class="btn btn-secondary"
        data-bs-dismiss="modal"

        >Close </button></div></div></div></div><form id="orderForm" action="/placeOrder" method="post"><div class="container custom-container main"><div class="row">< !-- Left Column - Col-7 --><div class="col-md-7"><div class="card"><div class="card-body"><h5 class="card-title">Saved Addresses</h5><%user.address.forEach(function(Address) {
                %> < !-- Address Card 1 --> <div class="address-card row" > <div class="col-1" > <input type="radio"
                name="Address"
                value="<%=Address._id%>"
                id="address1"
                checked /> </div> <div class="col-5" > <div class="address-line" >Name:</div> <div class="address-line" >Address:</div> <div class="address-line" >City:</div> <div class="address-line" >Pincode:</div> <div class="address-line" >State:</div> <div class="address-line" >Mobile Number:</div> </div> <div class="col-6" > <div class="address-value" ><%=Address.Name%></div> <div class="address-value" ><%=Address.AddressLane%></div> <div class="address-value" ><%=Address.City%></div> <div class="address-value" ><%=Address.Pincode%></div> <div class="address-value" ><%=Address.State%></div> <div class="address-value" ><%=Address.Mobile%></div> </div> <div class="col-1" > <button class="btn btn-danger" onclick="deleteAddress('<%= Address._id %>')" > Delete </button> </div> </div> <%
            })%><a class="btn btn-dark"
        style="background-color: black;"
        data-bs-toggle="modal"
        data-bs-target="#addAddressModal"
        ><i class="fas fa-plus-circle"></i>Add Address </a></div></div></div>< !-- Right Column - Col-5 --><div class="col-md-5"><div class="card"><div class="card-body"><h5 class="card-title">Payment Methods</h5><div class="form-check"><input class="form-check-input"
        type="radio"
        name="paymentMethod"
        id="cod"
        value="cod"
        checked /><label class="form-check-label" for="cod">Cash on Delivery (COD) </label></div><div class="form-check"><input class="form-check-input"
        type="radio"
        name="paymentMethod"
        id="online"
        value="online"

        /><label class="form-check-label" for="online">Online Payment </label></div><div class="justify-content-center"><button class="btn btn-success mt-4" id="confirmOrderButton">Confirm Order </button><a href="/shop"><button class="btn btn-secondary mt-4" type="button">Back to Shop</button></a></div></div></div></div></div></div></form><script>function deleteAddress(addressId) {

                fetch(`/deleteAddress/$ {
                    addressId
                }

                `, {

                    method: 'DELETE',
                }).then(response => {
                    if (response.ok) {
                        location.reload();
                    }

                    else {

                        console.error('Error deleting address');
                    }

                }).catch(error => {
                    console.error('Error deleting address:', error);
                });
            }







            document.getElementById("confirmOrderButton").addEventListener("click", function () {
                var selectedPaymentMethod = document.querySelector('input[name="paymentMethod"]:checked'
                ).value;
                document.getElementById("selectedPaymentMethod").value = selectedPaymentMethod;
                document.getElementById("orderForm").submit();
            });
        </script><script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"
        ></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"
        ></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
        crossorigin="anonymous"
        ></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-..."></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-..."></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-..."></script>
    </body>
</html>